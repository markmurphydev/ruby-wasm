<!--
Template for single-page Wasm load & run.
Template format is `%{var_name}`

Strategy from:
https://stackoverflow.com/questions/52582367/a-single-file-webassembly-html-demo
-->
<script>
    function compile_run_wasm() {
        const wasm_base64 = "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ZQIDaWR4AwRwYWlyBANrZXkFA3ZhbAgGAAhyZWNlaXZlcgEHbWVzc2FnZQIEYXJncwMMcmVjZWl2ZXJfb2JqBAZwYXJlbnQFBm1ldGhvZAkBAAFuCgQAA3ZhbAEJYml0X3dpZHRoAgx0b3BfYml0X21hc2sDEW1pc3NpbmdfYml0c19tYXNrCwEAAW4MBAABbgEFbl9pMzICFm5faTMyX25vX2ZpeG51bV9tYXJrZXIDEW5faTMyX3NpZ25fZXh0ZW5kDQEAAW4OAQABbg8CAAFuAQVuX2kzMhABAAFuEQEAAW4SAQABbhMBAAFuFAUAA2xocwEDcmhzAgdsaHNfdmFsAwdyaHNfdmFsBANyZXMVAQABYhYBAAFiFwEAAW4YAgABYQEBYhkCAAFhAQFiGgIAAWEBAWIbAgABYQEBYhwCAAFhAQFiAw8CBgEBA2ZvcgcBAANmb3IEgwEKAANzdHIBBmJveG51bQIDb2JqAwZtZXRob2QEBWNsYXNzBQthcnJfdW5pdHlwZQYRYWxpc3Rfc3RyX3VuaXR5cGUHFmFsaXN0X3N0cl91bml0eXBlX3BhaXIIEGFsaXN0X3N0cl9tZXRob2QJFWFsaXN0X3N0cl9tZXRob2RfcGFpcgeoAQ4ABG1haW4BCmVtcHR5X2FyZ3MCCnN0cl9Nb2R1bGUDCXN0cl9DbGFzcwQPc3RyX0Jhc2ljT2JqZWN0BQpzdHJfT2JqZWN0BgVzdHJfeAcHc3RyX25ldwgJc3RyX2NsYXNzCQhzdHJfbmFtZQoMY2xhc3NfTW9kdWxlCwtjbGFzc19DbGFzcwwRY2xhc3NfQmFzaWNPYmplY3QNDGNsYXNzX09iamVjdA==";
        const wasm_buffer = Uint8Array.from(atob(wasm_base64), c => c.charCodeAt(0)).buffer;
        WebAssembly.compile(wasm_buffer).then(wasm => {
            const wasm_instance = new WebAssembly.Instance(wasm);
            const output = wasm_instance.exports["__ruby_top_level_function"]();
            console.log(output);
        });
    }
</script>
<button onclick="compile_run_wasm()">Compile and run Wasm</button>

